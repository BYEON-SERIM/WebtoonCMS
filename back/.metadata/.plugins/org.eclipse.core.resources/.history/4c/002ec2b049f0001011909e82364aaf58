@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class WebtoonService {
    private final WebtoonRepository webtoonRepository;
    private final GeminiService geminiService; // GeminiService 주입

    // 기존 태그 추천 로직을 서비스로 이동
    public String getRecommendedTags(String description) {
        String prompt = "웹툰 줄거리: " + description + "\n위 내용을 분석해서 어울리는 태그 5개를 #태그1, #태그2 형식으로 답변해줘.";
        return geminiService.generateContent(prompt);
    }

    // AI 제목 찾기 로직
    public String findTitleByAi(String plotQuery) {
        List<Webtoon> allWebtoons = webtoonRepository.findAll();
        String webtoonContext = allWebtoons.stream()
            .map(w -> String.format("제목: %s, 줄거리: %s", w.getTitle(), w.getDescription()))
            .collect(Collectors.joining("\n"));

        String prompt = String.format(
            "너는 웹툰 전문가야. 다음 목록을 참고해서 설명과 가장 일치하는 작품 제목을 찾아줘.\n\n[목록]\n%s\n\n[설명]\n%s",
            webtoonContext, plotQuery
        );
        return geminiService.generateContent(prompt);
    }
    
    // ... 나머지 CRUD 메서드들
}